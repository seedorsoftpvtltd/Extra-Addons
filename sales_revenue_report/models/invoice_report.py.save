from odoo import api, fields, models

class Freightin(models.Model):
    _inherit = 'freight.operation'
    x_rpd_department = fields.Char(compute='_full_department_name', string='Department')
    # x_rpd_service_type=fields.Selection(compute='_service_type', string='Service type')
    # x_rpd_invoice_user_id = fields.Many2one('account.move', related="invoice_id.invoice_user_id")
    # x_rpd_partner_id=fields.Many2one('account.move', related="invoice_id.partner_id")


    def _full_department_name(self):
        for rec in self:
            name = rec.transport + " " + rec.direction
            print(name)
        rec.x_rpd_department = name

    # def _service_type(self):
    #     for rec in self:
    #         name=rec.ocean_shipping + "" + rec.land_shipping
    #     rec.x_rpd_service_type = name

class accounting(models.Model):
    _inherit = 'account.move'
    #sales person revenue report
    x_rpd_department = fields.Char(string="Department", related='operation_id.x_rpd_department')
    x_rpd_job_date=fields.Datetime(String="Job date" , related='operation_id.order_date')

    #shipment update report
    x_rpd_date=fields.Date(string="ETA" , related='operation_id.x_date')
    x_rpd_pod=fields.Many2one(string="POD",related='operation_id.discharg_port_id')
    x_rpd_pol=fields.Many2one(string="POL", related='operation_id.loading_port_id')
    x_rpd_bayan=fields.Char(string="Bayan No", related='operation_id.x_bayan_no')
    x_rpd_hbl = fields.Char(string="HAWB HBL", related='operation_id.x_hbl_no')
    x_rpd_mbl = fields.Char(string="MAWB MBL", related='operation_id.x_mpl_no')
    x_rpd_clientref=fields.Char(string="Client LPO No",related='operation_id.x_clientrefno')
    x_rpd_clientref = fields.Char(string="Client LPO No", related='operation_id.x_clientrefno')
    # x_rpd_servicetyp=fields.Char(String="Service type" , related='operation_id.x_rpd_service_type')

    # def _department_value(self):
    #     department = self.env['freight.operation'].search_read([('invoice_count','>=', 1)],
    #                                                                fields=['x_rpd_department','name'])
    #     for rec in department:
    #         print('.........>>>>>>>', department)
    #         payrec = rec.get('name')
    #         print(payrec)
    #         invoicerec = self.search_read(domain=[('name', '=', payrec)], fields=['id'])
    #         print('oiioioioi', invoicerec)
    #         inid = invoicerec[0]['id']
    #         print("mmmmm", inid)
    #         invoicerec = self.browse(inid)
    #         invoicerec.x_rpd_department = rec['x_rpd_department']
    #         self -= invoicerec
    #     self.x_rpd_department = 0
