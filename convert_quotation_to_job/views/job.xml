<?xml version="1.0"?>
<odoo>
    <data>

         <record model="ir.actions.act_window" id="action_create_job">
            <field name="name">Job</field>
            <field name="type">ir.actions.act_window</field>
            <field name="res_model">freight.operation</field>
            <field name="view_mode">form,tree</field>
            <field name="domain">[('main_id','=',active_id)]</field>
            <field name="context">{
            "default_main_id":active_id,

            }
            </field>
         </record>

        <record id="action_create_job_tree" model="ir.actions.act_window.view">
            <field eval="1" name="sequence"/>
            <field name="view_mode">tree</field>
            <field name="view_id" ref="scs_freight.view_freight_operation_tree"/>
            <field name="act_window_id" ref="action_create_job"/>
        </record>

        <record model='ir.ui.view' id='fright_view_from_sale'>
        <field name="name">sale.order_view</field>
        <field name="model">sale.order</field>
        <field name="inherit_id" ref="sale.view_order_form" />
        <field name="arch" type="xml">
           <xpath expr="//div[hasclass('oe_button_box')]" position="inside">
                    <button icon="fa-pencil-square-o"  name="%(action_create_job)d"
                       class="oe_highlight" type="action">
                        <field name="job_count" string="Create Job" widget="statinfo"/>
                    </button>

             </xpath>
         <xpath expr="//header" position="inside">

             <button name="action_create_job" string="Create Job" class="oe_highlight" type="object"/><!--                    <button name="action_create_invoice" string="Create Invoice"-->

        </xpath>
            <xpath expr="//field[@name='date_order']" position="after">
                   <field name="fright_direction"/>
                    <field name="fright_transport"/>
                     <field name="fright_ocean_shipping" attrs="{'invisible': [('fright_transport', '!=', 'ocean')],'readonly': [('state','not in',['draft'])]}"/>
                    <field name="fright_land_shipping" attrs="{'invisible': [('fright_transport', '!=', 'land')],'readonly': [('state','not in',['draft'])]}"/>
        </xpath>
        </field>
        </record>


        <record model='ir.ui.view' id='scs_fright_view'>
        <field name="name">freight.operation_view</field>
        <field name="model">freight.operation</field>
        <field name="inherit_id" ref="scs_freight.view_freight_operation_form" />
        <field name="arch" type="xml">

            <xpath expr="//field[@name='consignee_id']" position="after">
                   <field name="main_id"/>
                   <field name="incoterm"/>

           </xpath>
        </field>
        </record>



    </data>
</odoo>
